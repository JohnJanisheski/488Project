<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Market</title>
    <link rel="stylesheet" href="./layui/css/layui.css">
    <style>
        html,body{
            width: 100%;
            height: 100%;
            margin: 0px;
            padding: 0px;
        }
    </style>
</head>
<section id="upload">
<body>
    <div style="width: 500px; height: 520px;">
        <form class="layui-form" id="upload_item_form">
            <div class="layui-form-item">
                <div class="layui-input-block">
                    <div class="layui-upload-list">
                        <p id="demoText"></p>
                        <img class="layui-upload-img" style="width: 150px;height: 150px;" id="image">
                        <button type="button" class="layui-btn" id="test1">Upload picture</button>
                    </div>

                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label"> Item name</label>
                <div class="layui-input-block">
                  <input type="text" id="itemName" placeholder="Please Input Item name" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">Description</label>
                <div class="layui-input-block">
                    <textarea id="description" placeholder="Please Input Description" class="layui-textarea"></textarea>
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">Listing Price</label>
                <div class="layui-input-block">
                  <input id="price" type="text" placeholder="Listing Price" autocomplete="off" class="layui-input">
                </div>
            </div>
            <div class="layui-form-item">
                <label class="layui-form-label">Condition</label>
                <div class="layui-input-block">
                  <select name="city" id="condition" >
                    <option value="">Choose Condition</option>
                    <option value="0">New</option>
                    <option value="1">Good</option>
                    <option value="2">Fair</option>
                  </select>
                </div>
              </div>
            <div class="layui-form-item">
                <label class="layui-form-label">Type</label>
                <div class="layui-input-block">
                  <select name="city" id="type"  >
                    <option value="">Choose Type</option>
                    <option value="0">Furniture</option>
                    <option value="1">Books</option>
                    <option value="2">Electronics</option>
                    <option value="3">Clothing</option>
                    <option value="4">Other</option>
                  </select>
                </div>
              </div>
              <div class="layui-form-item">
                <label class="layui-form-label">Campus</label>
                <div class="layui-input-block">
                  <select name="city" id="campus" >
                    <option value="">Choose   Campus</option>
                    <option value="0">Abington</option>
                    <option value="1">Altoona</option>
                    <option value="2">Beaver</option>
                    <option value="3">Berks</option>
                    <option value="2">Brandywine</option>
                    <option value="3">DuBois</option>
                    <option value="0">Erie</option>
                    <option value="1">Fayette</option>
                    <option value="2">Greater Allegheny</option>
                    <option value="3">Harrisburg</option>
                    <option value="2">Hazleton</option>
                    <option value="3">Lehigh Valley</option>
                    <option value="3">Mont Alto</option>
                    <option value="0">New Kensington</option>
                    <option value="1">Schuylkill</option>
                    <option value="2">Scranton</option>
                    <option value="3">Shenango</option>
                    <option value="2">University Park</option>
                    <option value="3">Wilkes-Barre</option>
                    <option value="2">York</option>
                  </select>
                </div>
              </div>
            <div class="layui-form-item">
              <div class="layui-input-block">
                <button class="layui-btn" id="submit-upload"  type="submit">Submit </button>
                <button type="reset" class="layui-btn layui-btn-primary">Reset </button>
              </div>
            </div>
        </form>
    </div>
</body>
</section>
<script src="./layui/layui.js"></script>
<script>
        layui.use(['layer', 'form','element', 'upload'], function(){
            var layer = layui.layer
           ,form = layui.form
           ,element = layui.element
           ,$=layui.$
            ,upload = layui.upload;

            var index = parent.layer.getFrameIndex(window.name);
            //关闭iframe
            $('#closeIframe').click(function(){
                var val = $('#shopName').val();

                if($('#shopName').val()
                && $('#descript').val()
                && $('#Price').val()
                && $('#Condition').val()
                && $('#Type').val()
                && $('#Campus').val()
                ){
                  parent.layer.msg('Product['+val+'] have been submitted');
                  parent.layer.close(index);
                }
            });
            //普通图片上传
            var uploadInst = upload.render({
                elem: '#test1'
                ,url: 'https://httpbin.org/post' //改成您自己的上传接口
                ,before: function(obj){
                obj.preview(function(index, file, result){
                    $('#demo1').attr('src', result); //图片链接（base64）
                });
                }
                ,done: function(res){
                //如果上传失败
                if(res.code > 0){
                    return layer.msg('上传失败');
                }
                }
            });
        })
</script>
<!-- Insert these scripts at the bottom of the HTML, but before you use any Firebase services -->
<!-- Firebase App (the core Firebase SDK) is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.2.8/firebase-app.js"></script>
<!-- Add Firebase products that you want to use -->
<script src="https://www.gstatic.com/firebasejs/8.2.8/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.8/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.8/firebase-messaging.js"></script>
<script>
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    var firebaseConfig = {
        apiKey: "AIzaSyBHTt49PkYD2n_xOEaTfLffHBxvCoHQDes",
        authDomain: "mini-market-aa3c4.firebaseapp.com",
        databaseURL: "https://mini-market-aa3c4-default-rtdb.firebaseio.com",
        projectId: "mini-market-aa3c4",
        storageBucket: "mini-market-aa3c4.appspot.com",
        messagingSenderId: "490789165755",
        appId: "1:490789165755:web:99ce734f2657cce080e79e",
        measurementId: "G-D480CCRXP5"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

</script>

<!-- javascript for page changes -->
<!-- script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script-->
<script src="scripts/main.js"></script>
<script src="scripts/auth.js"></script>
<script src="scripts/messaging.js"></script>
<script src="scripts/firebase-messaging-sw.js"></script>
<script src="scripts/db-item-functions.js"></script>
</html>